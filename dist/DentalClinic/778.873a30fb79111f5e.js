"use strict";(self.webpackChunkDentalClinic=self.webpackChunkDentalClinic||[]).push([[778],{1778:(re,x,s)=>{s.r(x),s.d(x,{EmployeeModule:()=>ne});var f=s(6019),b=s(3886),l=s(9133),p=s(5304),m=s(4753),d=s(9468),e=s(3668),E=s(4300),A=s(9966),U=s(2782),C=s(2215),c=s(888),u=s(8167),F=s(138),y=s(9859),h=s(8727),B=s(6400),S=s(6731),N=s(5694),I=s(86),q=s(9112),D=s(4751);function L(o,n){if(1&o&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"Translate"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.Texts.EmployeeManagement))}}function M(o,n){if(1&o&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.s9C("value",t.data.employee.appUser.id),e.xp6(1),e.hij("",t.data.employee.appUser.userName," ")}}function J(o,n){if(1&o&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.userName)}}function Q(o,n){1&o&&e._UZ(0,"mat-divider",25)}function P(o,n){if(1&o&&(e.TgZ(0,"button",26),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"clear"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,1,t.Texts.Cancel)," ")}}function V(o,n){if(1&o&&(e.TgZ(0,"button",27),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"save"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.Q6J("disabled",!t.employeeForm.valid),e.xp6(1),e.hij("",e.lcZ(2,2,t.Texts.Save)," ")}}function K(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitEdit()}),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"save"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.employeeForm.valid),e.xp6(1),e.hij("",e.lcZ(2,2,t.Texts.Save)," ")}}function j(o,n){1&o&&(e.TgZ(0,"mat-card-footer"),e._uU(1," main card footer\n"),e.qZA())}let O=(()=>{class o{constructor(t,a,i,r,Z,T,v){this.formBuilder=t,this.repository=a,this.snackBar=i,this.data=r,this.matDialogRef=Z,this.appText=T,this.progressBarService=v,this.Texts=this.appText.getAppTexts(),this.employeeForm=this.formBuilder.group({firstName:["",l.kI.required],lastName:["",l.kI.required],gender:["0",l.kI.required],dateOfBirth:[],mobile:[],email:[],address:[],appUserId:[]}),this.getUsers=()=>this.repository.AppUserRepository.getUnassignedUsers("Employees").pipe((0,m.U)(g=>this.appUsers=g),(0,d.q)(1)).subscribe(),this.submitEdit=()=>{this.progressBarService.showProgressbar(),this.repository.EmployeeRepository.editEmployee(this.employeeForm.value,this.data.id).pipe((0,m.U)(g=>{this.matDialogRef.close({event:"updated"})}),(0,d.q)(1)).subscribe()},this.editing=r.employee}ngOnInit(){this.getUsers(),this.editing&&(this.employeeForm.controls.firstName.setValue(this.data.employee.firstName),this.employeeForm.controls.lastName.setValue(this.data.employee.lastName),this.employeeForm.controls.gender.setValue("male"===this.data.employee.gender?"0":"1"),this.employeeForm.controls.dateOfBirth.setValue(this.data.employee.dateOfBirth),this.employeeForm.controls.mobile.setValue(this.data.employee.mobile),this.employeeForm.controls.email.setValue(this.data.employee.email),this.employeeForm.controls.address.setValue(this.data.employee.address),this.employeeForm.controls.appUserId.setValue(this.data.employee.appUserId)),setTimeout(()=>this.progressBarService.hideProgressbar())}submitForm(){this.progressBarService.showProgressbar(),this.repository.EmployeeRepository.addEmployee(this.employeeForm.value).pipe((0,m.U)(t=>{201===t?(this.snackBar.open("Employee added succefully","OK",{duration:3e3}),document.querySelector("#clearEmployeeForm").click(),this.employeeForm.controls.gender.setValue("0"),this.getUsers()):409===t&&this.snackBar.open("Employee already exists","OK",{duration:3e3}),this.progressBarService.hideProgressbar()}),(0,d.q)(1)).subscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(E.b),e.Y36(A.ux),e.Y36(p.WI),e.Y36(p.so),e.Y36(U.u),e.Y36(C.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-form"]],decls:63,vars:38,consts:[[4,"ngIf"],[1,"form-container"],[3,"formGroup","submit"],[1,"flex-box-show"],["appearance","outline"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formControlName","gender"],["color","primary","value","0"],["color","primary","value","1"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["myDatePicker",""],["matInput","","formControlName","mobile"],["matInput","","formControlName","email"],["matInput","","formControlName","address"],["formControlName","appUserId"],["selected","",3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["inset","",4,"ngIf"],["id","clearEmployeeForm","class","transitionButton","type","reset","mat-raised-button","","color","accent",4,"ngIf"],["type","submit","mat-raised-button","","class","submitButton transitionButton",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","class","submitButton transitionButton",3,"disabled","click",4,"ngIf"],["selected","",3,"value"],[3,"value"],["inset",""],["id","clearEmployeeForm","type","reset","mat-raised-button","","color","accent",1,"transitionButton"],["type","submit","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled"],["type","button","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled","click"]],template:function(t,a){if(1&t&&(e.YNc(0,L,3,3,"mat-card-title",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"form",2),e.NdJ("submit",function(){return a.submitForm()}),e.TgZ(4,"mat-card-content",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"Translate"),e.qZA(),e._UZ(9,"input",5),e.TgZ(10,"mat-error"),e._uU(11,"Firstname is required"),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",4),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"Translate"),e.qZA(),e._UZ(16,"input",6),e.TgZ(17,"mat-error"),e._uU(18,"Lastname is required"),e.qZA(),e.qZA(),e.TgZ(19,"mat-radio-group",7),e.TgZ(20,"mat-radio-button",8),e._uU(21),e.ALo(22,"Translate"),e.qZA(),e._uU(23,"\xa0\xa0 "),e.TgZ(24,"mat-radio-button",9),e._uU(25),e.ALo(26,"Translate"),e.qZA(),e.qZA(),e.TgZ(27,"mat-form-field",4),e.TgZ(28,"mat-label"),e._uU(29),e.ALo(30,"Translate"),e.qZA(),e._UZ(31,"input",10),e._UZ(32,"mat-datepicker-toggle",11),e._UZ(33,"mat-datepicker",null,12),e.qZA(),e.TgZ(35,"mat-form-field",4),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"Translate"),e.qZA(),e._UZ(39,"input",13),e.qZA(),e.TgZ(40,"mat-form-field",4),e.TgZ(41,"mat-label"),e._uU(42),e.ALo(43,"Translate"),e.qZA(),e._UZ(44,"input",14),e.qZA(),e.TgZ(45,"mat-form-field",4),e.TgZ(46,"mat-label"),e._uU(47),e.ALo(48,"Translate"),e.qZA(),e._UZ(49,"input",15),e.qZA(),e.TgZ(50,"mat-form-field",4),e.TgZ(51,"mat-label"),e._uU(52),e.ALo(53,"Translate"),e.qZA(),e.TgZ(54,"mat-select",16),e.YNc(55,M,2,2,"mat-option",17),e.YNc(56,J,2,2,"mat-option",18),e.qZA(),e.qZA(),e.qZA(),e.YNc(57,Q,1,0,"mat-divider",19),e.TgZ(58,"mat-card-actions"),e.YNc(59,P,5,3,"button",20),e.YNc(60,V,5,4,"button",21),e.YNc(61,K,5,4,"button",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(62,j,2,0,"mat-card-footer",0)),2&t){const i=e.MAs(34);e.Q6J("ngIf",!a.editing),e.xp6(3),e.Q6J("formGroup",a.employeeForm),e.xp6(4),e.Oqu(e.lcZ(8,20,a.Texts.Firstname)),e.xp6(7),e.Oqu(e.lcZ(15,22,a.Texts.Lastname)),e.xp6(7),e.Oqu(e.lcZ(22,24,a.Texts.Male)),e.xp6(4),e.Oqu(e.lcZ(26,26,a.Texts.Female)),e.xp6(4),e.Oqu(e.lcZ(30,28,a.Texts.DateOfBirth)),e.xp6(2),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(5),e.Oqu(e.lcZ(38,30,a.Texts.Mobile)),e.xp6(5),e.Oqu(e.lcZ(43,32,a.Texts.Email)),e.xp6(5),e.Oqu(e.lcZ(48,34,a.Texts.Address)),e.xp6(5),e.Oqu(e.lcZ(53,36,a.Texts.Username)),e.xp6(3),e.Q6J("ngIf",a.editing&&a.data.employee.appUser),e.xp6(1),e.Q6J("ngForOf",a.appUsers),e.xp6(1),e.Q6J("ngIf",!a.editing),e.xp6(2),e.Q6J("ngIf",!a.editing),e.xp6(1),e.Q6J("ngIf",!a.editing),e.xp6(1),e.Q6J("ngIf",a.editing),e.xp6(1),e.Q6J("ngIf",!a.editing)}},directives:[f.O5,p.xY,l._Y,l.JL,l.sg,c.dn,u.KE,u.hX,F.Nt,l.Fj,l.JJ,l.u,u.TO,y.VQ,y.U0,h.hl,h.nW,u.R9,h.Mq,B.gD,f.sg,c.hq,c.n5,S.ey,N.d,I.lW,q.Hw,c.rt],pipes:[D.v],styles:[""]}),o})();var R=s(5077),Y=s(9463),w=s(89),H=s(4408),G=s(5479),z=s(166),W=s(4423);const X=["firstname"],$=["lastname"];function k(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-table",7),e.NdJ("editRow",function(i){return e.CHM(t),e.oxw().editEmployee(i)})("deleteRow",function(i){return e.CHM(t),e.oxw().deleteEmployee(i)})("tablePaging",function(i){return e.CHM(t),e.oxw().handlePaging(i)})("rowDetails",function(i){return e.CHM(t),e.oxw().showDetails(i)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("table",t.table)("excludedColumns",t.excludedColumns)("canEdit",t.canEdit)("canDelete",t.canDelete)}}const _=[{path:"",component:(()=>{class o{constructor(t,a,i,r,Z,T,v){this.overlay=t,this.repository=a,this.dilaog=i,this.snackBar=r,this.appText=Z,this.authenticationService=T,this.progressBarService=v,this.Texts=this.appText.getAppTexts(),this.dataLoaded=!1,this.excludedColumns=["id","createdBy","createdDate","lastModifiedBy","lastModifiedDate","isDeleted","appUser","appUserId"],this.fetchData=()=>this.repository.EmployeeRepository.getEmployees(this.firstnameSearchKey,this.lastnameSearchKey,this.pagingFilter).pipe((0,m.U)(g=>{this.table=g,this.dataLoaded=!0,this.progressBarService.hideProgressbar()}),(0,d.q)(1)).subscribe(),this.canEdit=this.authenticationService.checkPermission("/EditEmployee"),this.canDelete=this.authenticationService.checkPermission("/DeleteEmployee")}ngOnInit(){this.progressBarService.showProgressbar(),this.firstNameChangeEvent=(0,R.R)(this.firstname.nativeElement,"keyup").pipe((0,Y.b)(1e3),(0,m.U)(t=>{this.firstnameSearchKey=t.target.value.trim(),this.fetchData()})).subscribe(),this.lastNameChangeEvent=(0,R.R)(this.lastname.nativeElement,"keyup").pipe((0,Y.b)(1e3),(0,m.U)(t=>{this.lastnameSearchKey=t.target.value.trim(),this.fetchData()})).subscribe(),this.fetchData()}editEmployee(t){const a=this.overlay.scrollStrategies.reposition;"Mustafa"===t.firstName&&"Khazaee"===t.lastName?this.snackBar.open("You cannot edit system admin!","Close",{duration:6e3}):this.dilaog.open(O,{width:"320px",data:{employee:t,id:t.id,scrollStrategy:a}}).afterClosed().pipe((0,m.U)(r=>{r&&"updated"==r.event&&(this.fetchData(),this.snackBar.open("Employee updated succefully","OK",{duration:3e3}))}),(0,d.q)(1)).subscribe()}deleteEmployee(t){"Mustafa"===t.firstName&&"Khazaee"===t.lastName?this.snackBar.open("You cannot delete system admin!","Close",{duration:6e3}):this.dilaog.open(w.F,{width:"300px",height:"150px",data:{message:"Are you sure you want to delete this employee?"}}).afterClosed().pipe((0,m.U)(i=>{i&&"delete"===i.event&&(this.progressBarService.showProgressbar(),this.repository.EmployeeRepository.deleteEmployee(t.id).pipe((0,m.U)(r=>{this.fetchData(),this.snackBar.open("Employee deleted succefully","OK",{duration:3e3})}),(0,d.q)(1)).subscribe())}),(0,d.q)(1)).subscribe()}showDetails(t){this.dilaog.open(H.d,{width:"500px",height:"600px",data:{model:t}})}handlePaging(t){this.pagingFilter=t,this.fetchData()}ngOnDestroy(){this.firstNameChangeEvent.unsubscribe(),this.lastNameChangeEvent.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(G.aV),e.Y36(E.b),e.Y36(p.uw),e.Y36(A.ux),e.Y36(U.u),e.Y36(z.$),e.Y36(C.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee"]],viewQuery:function(t,a){if(1&t&&(e.Gf(X,7),e.Gf($,7)),2&t){let i;e.iGM(i=e.CRH())&&(a.firstname=i.first),e.iGM(i=e.CRH())&&(a.lastname=i.first)}},decls:17,vars:10,consts:[[1,"searchBar"],["for","username"],["type","text",1,"searchBarInput"],["firstname",""],["for","lastname"],["lastname",""],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails",4,"ngIf"],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"Translate"),e.qZA(),e.TgZ(3,"div",0),e.TgZ(4,"label",1),e._uU(5),e.ALo(6,"Translate"),e._UZ(7,"input",2,3),e.qZA(),e.TgZ(9,"label",4),e._uU(10),e.ALo(11,"Translate"),e._UZ(12,"input",2,5),e.qZA(),e.qZA(),e.YNc(14,k,1,4,"app-table",6),e.TgZ(15,"mat-card-footer"),e._uU(16," main card footer\n"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,4,a.Texts.EmployeeManagement)),e.xp6(4),e.hij(" ",e.lcZ(6,6,a.Texts.Firstname)," : "),e.xp6(5),e.hij(" ",e.lcZ(11,8,a.Texts.Lastname)," : "),e.xp6(4),e.Q6J("ngIf",a.dataLoaded))},directives:[c.n5,f.O5,c.rt,W.a],pipes:[D.v],styles:[""]}),o})()},{path:"AddEmployee",component:O}];let ee=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[b.Bz.forChild(_)],b.Bz]}),o})();var te=s(1548),oe=s(9009),ae=s(514),se=s(7735),ie=s(8191);let ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:p.so,useValue:{}},{provide:p.WI,useValue:{}}],imports:[[f.ez,ee,te.N6,c.QW,oe.Cv,se.m,u.lN,q.Ps,N.t,F.c,I.ot,ae.rP,B.LD,l.UX,p.Is,y.Fk,h.FA,ie.I]]}),o})()}}]);