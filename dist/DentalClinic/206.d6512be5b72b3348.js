"use strict";(self.webpackChunkDentalClinic=self.webpackChunkDentalClinic||[]).push([[206],{8206:(nt,x,r)=>{r.r(x),r.d(x,{DoctorModule:()=>it});var h=r(6019),b=r(3886),l=r(9133),d=r(5304),c=r(4753),m=r(9468),t=r(3668),A=r(4300),U=r(9966),C=r(2782),y=r(2215),p=r(888),u=r(8167),F=r(138),Z=r(9859),f=r(8727),B=r(6400),L=r(6731),N=r(5694),I=r(86),q=r(9112),O=r(4751);function J(e,i){if(1&e&&(t.TgZ(0,"mat-card-title"),t._uU(1),t.ALo(2,"Translate"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,o.Texts.DoctorManagement))}}function M(e,i){if(1&e&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.s9C("value",o.data.doctor.appUser.id),t.xp6(1),t.hij("",o.data.doctor.appUser.userName," ")}}function E(e,i){if(1&e&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.s9C("value",o.id),t.xp6(1),t.Oqu(o.userName)}}function Q(e,i){1&e&&t._UZ(0,"mat-divider",25)}function P(e,i){if(1&e&&(t.TgZ(0,"button",26),t._uU(1),t.ALo(2,"Translate"),t.TgZ(3,"mat-icon"),t._uU(4,"clear"),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,1,o.Texts.Cancel)," ")}}function V(e,i){if(1&e&&(t.TgZ(0,"button",27),t._uU(1),t.ALo(2,"Translate"),t.TgZ(3,"mat-icon"),t._uU(4,"save"),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.Q6J("disabled",!o.doctorForm.valid),t.xp6(1),t.hij("",t.lcZ(2,2,o.Texts.Save)," ")}}function j(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(o),t.oxw().submitEdit()}),t._uU(1),t.ALo(2,"Translate"),t.TgZ(3,"mat-icon"),t._uU(4,"save"),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("disabled",!o.doctorForm.valid),t.xp6(1),t.hij("",t.lcZ(2,2,o.Texts.Save)," ")}}function K(e,i){1&e&&(t.TgZ(0,"mat-card-footer"),t._uU(1," main card footer\n"),t.qZA())}let R=(()=>{class e{constructor(o,a,s,n,v,T,D){this.formBuilder=o,this.repository=a,this.snackBar=s,this.data=n,this.matDialogRef=v,this.appText=T,this.progressBarService=D,this.Texts=this.appText.getAppTexts(),this.doctorForm=this.formBuilder.group({firstName:["",l.kI.required],lastName:["",l.kI.required],gender:["0",l.kI.required],dateOfBirth:[],mobile:[],email:[],address:[],appUserId:[]}),this.getUsers=()=>this.repository.AppUserRepository.getUnassignedUsers("Doctors").pipe((0,c.U)(g=>{this.appUsers=g}),(0,m.q)(1)).subscribe(),this.submitEdit=()=>{this.progressBarService.showProgressbar(),this.repository.DoctorRepository.editDoctor(this.doctorForm.value,this.data.id).pipe((0,c.U)(g=>{this.matDialogRef.close({event:"updated"})}),(0,m.q)(1)).subscribe()},this.editing=n.doctor}ngOnInit(){this.getUsers(),this.editing&&(this.doctorForm.controls.firstName.setValue(this.data.doctor.firstName),this.doctorForm.controls.lastName.setValue(this.data.doctor.lastName),this.doctorForm.controls.gender.setValue("male"===this.data.doctor.gender?"0":"1"),this.doctorForm.controls.dateOfBirth.setValue(this.data.doctor.dateOfBirth),this.doctorForm.controls.mobile.setValue(this.data.doctor.mobile),this.doctorForm.controls.email.setValue(this.data.doctor.email),this.doctorForm.controls.address.setValue(this.data.doctor.address),this.doctorForm.controls.appUserId.setValue(this.data.doctor.appUserId)),setTimeout(()=>this.progressBarService.hideProgressbar())}submitForm(){this.progressBarService.showProgressbar(),this.repository.DoctorRepository.addDoctor(this.doctorForm.value).pipe((0,c.U)(o=>{201===o?(this.snackBar.open("Doctor added succefully","OK",{duration:3e3}),document.querySelector("#clearDoctorForm").click(),this.doctorForm.controls.gender.setValue("0"),this.getUsers()):409===o&&this.snackBar.open("Doctor already exists","OK",{duration:3e3}),this.progressBarService.hideProgressbar()}),(0,m.q)(1)).subscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.qu),t.Y36(A.b),t.Y36(U.ux),t.Y36(d.WI),t.Y36(d.so),t.Y36(C.u),t.Y36(y.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-doctor-form"]],decls:63,vars:38,consts:[[4,"ngIf"],[1,"form-container"],[3,"formGroup","submit"],[1,"flex-box-show"],["appearance","outline"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formControlName","gender"],["color","primary","value","0"],["color","primary","value","1"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["myDatePicker",""],["matInput","","formControlName","mobile"],["matInput","","formControlName","email"],["matInput","","formControlName","address"],["formControlName","appUserId"],["selected","",3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["inset","",4,"ngIf"],["id","clearDoctorForm","class","transitionButton","type","reset","mat-raised-button","","color","accent",4,"ngIf"],["type","submit","mat-raised-button","","class","submitButton transitionButton",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","class","submitButton transitionButton",3,"disabled","click",4,"ngIf"],["selected","",3,"value"],[3,"value"],["inset",""],["id","clearDoctorForm","type","reset","mat-raised-button","","color","accent",1,"transitionButton"],["type","submit","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled"],["type","button","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled","click"]],template:function(o,a){if(1&o&&(t.YNc(0,J,3,3,"mat-card-title",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"form",2),t.NdJ("submit",function(){return a.submitForm()}),t.TgZ(4,"mat-card-content",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7),t.ALo(8,"Translate"),t.qZA(),t._UZ(9,"input",5),t.TgZ(10,"mat-error"),t._uU(11,"Firstname is required"),t.qZA(),t.qZA(),t.TgZ(12,"mat-form-field",4),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"Translate"),t.qZA(),t._UZ(16,"input",6),t.TgZ(17,"mat-error"),t._uU(18,"Lastname is required"),t.qZA(),t.qZA(),t.TgZ(19,"mat-radio-group",7),t.TgZ(20,"mat-radio-button",8),t._uU(21),t.ALo(22,"Translate"),t.qZA(),t._uU(23,"\xa0\xa0 "),t.TgZ(24,"mat-radio-button",9),t._uU(25),t.ALo(26,"Translate"),t.qZA(),t.qZA(),t.TgZ(27,"mat-form-field",4),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"Translate"),t.qZA(),t._UZ(31,"input",10),t._UZ(32,"mat-datepicker-toggle",11),t._UZ(33,"mat-datepicker",null,12),t.qZA(),t.TgZ(35,"mat-form-field",4),t.TgZ(36,"mat-label"),t._uU(37),t.ALo(38,"Translate"),t.qZA(),t._UZ(39,"input",13),t.qZA(),t.TgZ(40,"mat-form-field",4),t.TgZ(41,"mat-label"),t._uU(42),t.ALo(43,"Translate"),t.qZA(),t._UZ(44,"input",14),t.qZA(),t.TgZ(45,"mat-form-field",4),t.TgZ(46,"mat-label"),t._uU(47),t.ALo(48,"Translate"),t.qZA(),t._UZ(49,"input",15),t.qZA(),t.TgZ(50,"mat-form-field",4),t.TgZ(51,"mat-label"),t._uU(52),t.ALo(53,"Translate"),t.qZA(),t.TgZ(54,"mat-select",16),t.YNc(55,M,2,2,"mat-option",17),t.YNc(56,E,2,2,"mat-option",18),t.qZA(),t.qZA(),t.qZA(),t.YNc(57,Q,1,0,"mat-divider",19),t.TgZ(58,"mat-card-actions"),t.YNc(59,P,5,3,"button",20),t.YNc(60,V,5,4,"button",21),t.YNc(61,j,5,4,"button",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(62,K,2,0,"mat-card-footer",0)),2&o){const s=t.MAs(34);t.Q6J("ngIf",!a.editing),t.xp6(3),t.Q6J("formGroup",a.doctorForm),t.xp6(4),t.Oqu(t.lcZ(8,20,a.Texts.Firstname)),t.xp6(7),t.Oqu(t.lcZ(15,22,a.Texts.Lastname)),t.xp6(7),t.Oqu(t.lcZ(22,24,a.Texts.Male)),t.xp6(4),t.Oqu(t.lcZ(26,26,a.Texts.Female)),t.xp6(4),t.Oqu(t.lcZ(30,28,a.Texts.DateOfBirth)),t.xp6(2),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(5),t.Oqu(t.lcZ(38,30,a.Texts.Mobile)),t.xp6(5),t.Oqu(t.lcZ(43,32,a.Texts.Email)),t.xp6(5),t.Oqu(t.lcZ(48,34,a.Texts.Address)),t.xp6(5),t.Oqu(t.lcZ(53,36,a.Texts.Username)),t.xp6(3),t.Q6J("ngIf",a.editing&&a.data.doctor.appUser),t.xp6(1),t.Q6J("ngForOf",a.appUsers),t.xp6(1),t.Q6J("ngIf",!a.editing),t.xp6(2),t.Q6J("ngIf",!a.editing),t.xp6(1),t.Q6J("ngIf",!a.editing),t.xp6(1),t.Q6J("ngIf",a.editing),t.xp6(1),t.Q6J("ngIf",!a.editing)}},directives:[h.O5,d.xY,l._Y,l.JL,l.sg,p.dn,u.KE,u.hX,F.Nt,l.Fj,l.JJ,l.u,u.TO,Z.VQ,Z.U0,f.hl,f.nW,u.R9,f.Mq,B.gD,h.sg,p.hq,p.n5,L.ey,N.d,I.lW,q.Hw,p.rt],pipes:[O.v],styles:[""]}),e})();var S=r(5077),Y=r(9463),w=r(89),H=r(4408),G=r(5479),W=r(166),X=r(4423);const z=["firstname"],$=["lastname"];function _(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"app-table",7),t.NdJ("editRow",function(s){return t.CHM(o),t.oxw().editDoctor(s)})("deleteRow",function(s){return t.CHM(o),t.oxw().deleteDoctor(s)})("tablePaging",function(s){return t.CHM(o),t.oxw().handlePaging(s)})("rowDetails",function(s){return t.CHM(o),t.oxw().showDetails(s)}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("table",o.table)("excludedColumns",o.excludedColumns)("canEdit",o.canEdit)("canDelete",o.canDelete)}}const k=[{path:"",component:(()=>{class e{constructor(o,a,s,n,v,T,D){this.overlay=o,this.repository=a,this.dilaog=s,this.snackBar=n,this.appText=v,this.authenticationService=T,this.progressBarService=D,this.dataLoaded=!1,this.Texts=this.appText.getAppTexts(),this.excludedColumns=["id","createdBy","createdDate","lastModifiedBy","lastModifiedDate","isDeleted","appUser","visits","appUserId"],this.fetchData=()=>this.repository.DoctorRepository.getDoctors(this.firstnameSearchKey,this.lastnameSearchKey,this.pagingFilter).pipe((0,c.U)(g=>{this.table=g,this.dataLoaded=!0,this.progressBarService.hideProgressbar()}),(0,m.q)(1)).subscribe(),this.canEdit=this.authenticationService.checkPermission("/EditDoctor"),this.canDelete=this.authenticationService.checkPermission("/DeleteDoctor")}ngOnInit(){this.progressBarService.showProgressbar(),this.firstNameChangeEvent=(0,S.R)(this.firstname.nativeElement,"keyup").pipe((0,Y.b)(1e3),(0,c.U)(o=>{this.firstnameSearchKey=o.target.value.trim(),this.fetchData()})).subscribe(),this.lastNameChangeEvent=(0,S.R)(this.lastname.nativeElement,"keyup").pipe((0,Y.b)(1e3),(0,c.U)(o=>{this.lastnameSearchKey=o.target.value.trim(),this.fetchData()})).subscribe(),this.fetchData()}editDoctor(o){this.dilaog.open(R,{width:"320px",data:{doctor:o,id:o.id,scrollStrategy:this.overlay.scrollStrategies.reposition}}).afterClosed().pipe((0,c.U)(n=>{n&&"updated"==n.event&&(this.fetchData(),this.snackBar.open("Doctor updated succefully","OK",{duration:3e3}))}),(0,m.q)(1)).subscribe()}deleteDoctor(o){this.dilaog.open(w.F,{width:"300px",height:"150px",data:{message:"Are you sure you want to delete this doctor?"}}).afterClosed().pipe((0,c.U)(s=>{"delete"===s.event&&(this.progressBarService.showProgressbar(),this.repository.DoctorRepository.deleteDoctor(o.id).pipe((0,c.U)(n=>{this.fetchData(),this.snackBar.open("Doctor deleted succefully","OK",{duration:3e3})}),(0,m.q)(1)).subscribe())}),(0,m.q)(1)).subscribe()}showDetails(o){this.dilaog.open(H.d,{width:"500px",height:"600px",data:{model:o}})}handlePaging(o){this.pagingFilter=o,this.fetchData()}ngOnDestroy(){this.firstNameChangeEvent.unsubscribe(),this.lastNameChangeEvent.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(G.aV),t.Y36(A.b),t.Y36(d.uw),t.Y36(U.ux),t.Y36(C.u),t.Y36(W.$),t.Y36(y.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-doctor"]],viewQuery:function(o,a){if(1&o&&(t.Gf(z,7),t.Gf($,7)),2&o){let s;t.iGM(s=t.CRH())&&(a.firstname=s.first),t.iGM(s=t.CRH())&&(a.lastname=s.first)}},decls:17,vars:10,consts:[[1,"searchBar"],["for","username"],["type","text",1,"searchBarInput"],["firstname",""],["for","lastname"],["lastname",""],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails",4,"ngIf"],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails"]],template:function(o,a){1&o&&(t.TgZ(0,"mat-card-title"),t._uU(1),t.ALo(2,"Translate"),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"label",1),t._uU(5),t.ALo(6,"Translate"),t._UZ(7,"input",2,3),t.qZA(),t.TgZ(9,"label",4),t._uU(10),t.ALo(11,"Translate"),t._UZ(12,"input",2,5),t.qZA(),t.qZA(),t.YNc(14,_,1,4,"app-table",6),t.TgZ(15,"mat-card-footer"),t._uU(16," main card footer\n"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,4,a.Texts.DoctorManagement)),t.xp6(4),t.hij(" ",t.lcZ(6,6,a.Texts.Firstname)," : "),t.xp6(5),t.hij(" ",t.lcZ(11,8,a.Texts.Lastname)," : "),t.xp6(4),t.Q6J("ngIf",a.dataLoaded))},directives:[p.n5,h.O5,p.rt,X.a],pipes:[O.v],styles:[""]}),e})()},{path:"AddDoctor",component:R}];let tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[b.Bz.forChild(k)],b.Bz]}),e})();var ot=r(1548),et=r(9009),at=r(514),rt=r(7735),st=r(8191);let it=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:d.so,useValue:{}},{provide:d.WI,useValue:{}}],imports:[[h.ez,tt,ot.N6,p.QW,et.Cv,rt.m,u.lN,q.Ps,N.t,F.c,I.ot,at.rP,B.LD,l.UX,d.Is,Z.Fk,f.FA,st.I]]}),e})()}}]);