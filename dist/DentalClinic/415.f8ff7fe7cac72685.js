"use strict";(self.webpackChunkDentalClinic=self.webpackChunkDentalClinic||[]).push([[415],{5415:(it,x,n)=>{n.r(x),n.d(x,{PatientModule:()=>at});var h=n(6019),P=n(3886),r=n(9133),c=n(5304),l=n(4753),p=n(9468),t=n(3668),A=n(4300),C=n(9966),y=n(2782),F=n(2215),d=n(888),u=n(8167),U=n(138),g=n(9859),B=n(5694),N=n(86),D=n(9112),R=n(4751);function S(a,s){if(1&a&&(t.TgZ(0,"mat-card-title"),t._uU(1),t.ALo(2,"Translate"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.Texts.PatientManagement))}}function q(a,s){1&a&&t._UZ(0,"mat-divider",16)}function M(a,s){if(1&a&&(t.TgZ(0,"button",17),t._uU(1),t.ALo(2,"Translate"),t.TgZ(3,"mat-icon"),t._uU(4,"clear"),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,1,e.Texts.Cancel)," ")}}function Y(a,s){if(1&a&&(t.TgZ(0,"button",18),t._uU(1),t.ALo(2,"Translate"),t.TgZ(3,"mat-icon"),t._uU(4,"save"),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.Q6J("disabled",!e.patientForm.valid),t.xp6(1),t.hij("",t.lcZ(2,2,e.Texts.Save)," ")}}function E(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitEdit()}),t._uU(1),t.ALo(2,"Translate"),t.TgZ(3,"mat-icon"),t._uU(4,"save"),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("disabled",!e.patientForm.valid),t.xp6(1),t.hij("",t.lcZ(2,2,e.Texts.Save)," ")}}function L(a,s){1&a&&(t.TgZ(0,"mat-card-footer"),t._uU(1," main card footer\n"),t.qZA())}let I=(()=>{class a{constructor(e,i,o,m,b,Z,T){this.formBuilder=e,this.repository=i,this.snackBar=o,this.data=m,this.matDialogRef=b,this.appText=Z,this.progressBarService=T,this.Texts=this.appText.getAppTexts(),this.patientForm=this.formBuilder.group({firstName:["",r.kI.required],lastName:[""],gender:["0"],age:["",r.kI.required],mobile:[]}),this.submitEdit=()=>{this.progressBarService.showProgressbar(),this.repository.PatientRepository.editPatient(this.patientForm.value,this.data.id).pipe((0,l.U)(ot=>{this.matDialogRef.close({event:"updated"})}),(0,p.q)(1)).subscribe()},this.editing=m.patient}ngOnInit(){this.editing&&(this.patientForm.controls.firstName.setValue(this.data.patient.firstName),this.patientForm.controls.lastName.setValue(this.data.patient.lastName),this.patientForm.controls.gender.setValue("male"===this.data.patient.gender?"0":"1"),this.patientForm.controls.age.setValue(this.data.patient.age),this.patientForm.controls.mobile.setValue(this.data.patient.mobile)),setTimeout(()=>this.progressBarService.hideProgressbar())}submitForm(){this.progressBarService.showProgressbar(),this.repository.PatientRepository.addPatient(this.patientForm.value).pipe((0,l.U)(e=>{201===e?(this.snackBar.open("Patient added succefully","OK",{duration:3e3}),document.querySelector("#clearPatientForm").click(),this.patientForm.controls.gender.setValue("0")):409===e&&this.snackBar.open("Patient already exists","OK",{duration:3e3}),this.progressBarService.hideProgressbar()}),(0,p.q)(1)).subscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.qu),t.Y36(A.b),t.Y36(C.ux),t.Y36(c.WI),t.Y36(c.so),t.Y36(y.u),t.Y36(F.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-patient-form"]],decls:43,vars:25,consts:[[4,"ngIf"],[1,"form-container"],[3,"formGroup","submit"],[1,"flex-box-show"],["appearance","outline"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formControlName","gender"],["color","primary","value","0"],["color","primary","value","1"],["matInput","","type","number","min","1","max","120","formControlName","age"],["matInput","","formControlName","mobile"],["inset","",4,"ngIf"],["id","clearPatientForm","class","transitionButton","type","reset","mat-raised-button","","color","accent",4,"ngIf"],["type","submit","mat-raised-button","","class","submitButton transitionButton",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","class","submitButton transitionButton",3,"disabled","click",4,"ngIf"],["inset",""],["id","clearPatientForm","type","reset","mat-raised-button","","color","accent",1,"transitionButton"],["type","submit","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled"],["type","button","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled","click"]],template:function(e,i){1&e&&(t.YNc(0,S,3,3,"mat-card-title",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"form",2),t.NdJ("submit",function(){return i.submitForm()}),t.TgZ(4,"mat-card-content",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7),t.ALo(8,"Translate"),t.qZA(),t._UZ(9,"input",5),t.TgZ(10,"mat-error"),t._uU(11,"Firstname is required"),t.qZA(),t.qZA(),t.TgZ(12,"mat-form-field",4),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"Translate"),t.qZA(),t._UZ(16,"input",6),t.qZA(),t.TgZ(17,"mat-radio-group",7),t.TgZ(18,"mat-radio-button",8),t._uU(19),t.ALo(20,"Translate"),t.qZA(),t._uU(21,"\xa0\xa0 "),t.TgZ(22,"mat-radio-button",9),t._uU(23),t.ALo(24,"Translate"),t.qZA(),t.qZA(),t.TgZ(25,"mat-form-field",4),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"Translate"),t.qZA(),t._UZ(29,"input",10),t.TgZ(30,"mat-error"),t._uU(31,"Age is required"),t.qZA(),t.qZA(),t.TgZ(32,"mat-form-field",4),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"Translate"),t.qZA(),t._UZ(36,"input",11),t.qZA(),t.qZA(),t.YNc(37,q,1,0,"mat-divider",12),t.TgZ(38,"mat-card-actions"),t.YNc(39,M,5,3,"button",13),t.YNc(40,Y,5,4,"button",14),t.YNc(41,E,5,4,"button",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(42,L,2,0,"mat-card-footer",0)),2&e&&(t.Q6J("ngIf",!i.editing),t.xp6(3),t.Q6J("formGroup",i.patientForm),t.xp6(4),t.Oqu(t.lcZ(8,13,i.Texts.Firstname)),t.xp6(7),t.Oqu(t.lcZ(15,15,i.Texts.Lastname)),t.xp6(5),t.Oqu(t.lcZ(20,17,i.Texts.Male)),t.xp6(4),t.Oqu(t.lcZ(24,19,i.Texts.Female)),t.xp6(4),t.Oqu(t.lcZ(28,21,i.Texts.Age)),t.xp6(7),t.Oqu(t.lcZ(35,23,i.Texts.Mobile)),t.xp6(3),t.Q6J("ngIf",!i.editing),t.xp6(2),t.Q6J("ngIf",!i.editing),t.xp6(1),t.Q6J("ngIf",!i.editing),t.xp6(1),t.Q6J("ngIf",i.editing),t.xp6(1),t.Q6J("ngIf",!i.editing))},directives:[h.O5,c.xY,r._Y,r.JL,r.sg,d.dn,u.KE,u.hX,U.Nt,r.Fj,r.JJ,r.u,u.TO,g.VQ,g.U0,r.qQ,r.Fd,r.wV,d.hq,d.n5,B.d,N.lW,D.Hw,d.rt],pipes:[R.v],styles:[""]}),a})();var f=n(5077),v=n(9463),J=n(89),O=n(4408),Q=n(166),K=n(4423);const w=["firstname"],V=["lastname"],j=["mobile"];function H(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"app-table",8),t.NdJ("editRow",function(o){return t.CHM(e),t.oxw().editPatient(o)})("deleteRow",function(o){return t.CHM(e),t.oxw().deletePatient(o)})("tablePaging",function(o){return t.CHM(e),t.oxw().handlePaging(o)})("rowDetails",function(o){return t.CHM(e),t.oxw().showDetails(o)}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("table",e.table)("excludedColumns",e.excludedColumns)("canEdit",e.canEdit)("canDelete",e.canDelete)}}const G=[{path:"",component:(()=>{class a{constructor(e,i,o,m,b,Z){this.repository=e,this.dilaog=i,this.snackBar=o,this.appText=m,this.authenticationService=b,this.progressBarService=Z,this.Texts=this.appText.getAppTexts(),this.dataLoaded=!1,this.excludedColumns=["id","createdBy","createdDate","lastModifiedBy","lastModifiedDate","isDeleted","visits"],this.fetchData=()=>this.repository.PatientRepository.getPatients(this.firstnameSearchKey,this.lastnameSearchKey,this.mobileSearchKey,this.pagingFilter).pipe((0,l.U)(T=>{this.table=T,this.dataLoaded=!0,this.progressBarService.hideProgressbar()}),(0,p.q)(1)).subscribe(),this.canEdit=this.authenticationService.checkPermission("/EditPatient"),this.canDelete=this.authenticationService.checkPermission("/DeletePatient")}ngOnInit(){this.progressBarService.showProgressbar(),this.firstNameChangeEvent=(0,f.R)(this.firstname.nativeElement,"keyup").pipe((0,v.b)(1e3),(0,l.U)(e=>{this.firstnameSearchKey=e.target.value.trim(),this.fetchData()})).subscribe(),this.lastNameChangeEvent=(0,f.R)(this.lastname.nativeElement,"keyup").pipe((0,v.b)(1e3),(0,l.U)(e=>{this.lastnameSearchKey=e.target.value.trim(),this.fetchData()})).subscribe(),this.mobileChangeEvent=(0,f.R)(this.mobile.nativeElement,"keyup").pipe((0,v.b)(1e3),(0,l.U)(e=>{this.mobileSearchKey=e.target.value.trim(),this.fetchData()})).subscribe(),this.fetchData()}editPatient(e){this.dilaog.open(I,{width:"320px",data:{patient:e,id:e.id}}).afterClosed().pipe((0,l.U)(o=>{o&&"updated"==o.event&&(this.fetchData(),this.snackBar.open("Patient updated succefully","OK",{duration:3e3}))}),(0,p.q)(1)).subscribe()}deletePatient(e){this.dilaog.open(J.F,{width:"300px",height:"150px",data:{message:"Are you sure you want to delete this patient?"}}).afterClosed().pipe((0,l.U)(o=>{"delete"===o.event&&(this.progressBarService.showProgressbar(),this.repository.PatientRepository.deletePatient(e.id).pipe((0,l.U)(m=>{this.fetchData(),this.snackBar.open("Patient deleted succefully","OK",{duration:3e3})}),(0,p.q)(1)).subscribe())}),(0,p.q)(1)).subscribe()}showDetails(e){this.dilaog.open(O.d,{width:"500px",height:"600px",data:{model:e}})}handlePaging(e){this.pagingFilter=e,this.fetchData()}ngOnDestroy(){this.firstNameChangeEvent.unsubscribe(),this.lastNameChangeEvent.unsubscribe(),this.mobileChangeEvent.unsubscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.b),t.Y36(c.uw),t.Y36(C.ux),t.Y36(y.u),t.Y36(Q.$),t.Y36(F.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-patient"]],viewQuery:function(e,i){if(1&e&&(t.Gf(w,7),t.Gf(V,7),t.Gf(j,7)),2&e){let o;t.iGM(o=t.CRH())&&(i.firstname=o.first),t.iGM(o=t.CRH())&&(i.lastname=o.first),t.iGM(o=t.CRH())&&(i.mobile=o.first)}},decls:22,vars:13,consts:[[1,"searchBar"],["for","username"],["type","text",1,"searchBarInput"],["firstname",""],["for","lastname"],["lastname",""],["mobile",""],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails",4,"ngIf"],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card-title"),t._uU(1),t.ALo(2,"Translate"),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"label",1),t._uU(5),t.ALo(6,"Translate"),t._UZ(7,"input",2,3),t.qZA(),t.TgZ(9,"label",4),t._uU(10),t.ALo(11,"Translate"),t._UZ(12,"input",2,5),t.qZA(),t.TgZ(14,"label",4),t._uU(15),t.ALo(16,"Translate"),t._UZ(17,"input",2,6),t.qZA(),t.qZA(),t.YNc(19,H,1,4,"app-table",7),t.TgZ(20,"mat-card-footer"),t._uU(21," main card footer\n"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,5,i.Texts.PatientManagement)),t.xp6(4),t.hij(" ",t.lcZ(6,7,i.Texts.Firstname)," : "),t.xp6(5),t.hij(" ",t.lcZ(11,9,i.Texts.Lastname)," : "),t.xp6(5),t.hij(" ",t.lcZ(16,11,i.Texts.Mobile)," : "),t.xp6(4),t.Q6J("ngIf",i.dataLoaded))},directives:[d.n5,h.O5,d.rt,K.a],pipes:[R.v],styles:[""]}),a})()},{path:"AddPatient",component:I}];let W=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[P.Bz.forChild(G)],P.Bz]}),a})();var X=n(8727),z=n(1548),$=n(9009),k=n(6400),_=n(514),tt=n(7735),et=n(8191);let at=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:c.so,useValue:{}},{provide:c.WI,useValue:{}}],imports:[[h.ez,W,z.N6,d.QW,$.Cv,tt.m,u.lN,D.Ps,B.t,U.c,N.ot,_.rP,k.LD,r.UX,c.Is,g.Fk,X.FA,et.I]]}),a})()}}]);