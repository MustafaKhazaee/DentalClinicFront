"use strict";(self.webpackChunkDentalClinic=self.webpackChunkDentalClinic||[]).push([[531],{9531:(te,A,a)=>{a.r(A),a.d(A,{RoleModule:()=>k});var f=a(6019),h=a(3886),i=a(9133),m=a(5304),d=a(4753),Z=a(9468),e=a(3668),x=a(4300),v=a(9966),R=a(2782),C=a(2215),u=a(888),T=a(8167),q=a(138),U=a(514),b=a(5694),y=a(86),N=a(9112),L=a(4751);function F(l,r){if(1&l&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"Translate"),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.Texts.RoleManagement))}}function B(l,r){if(1&l){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",43),e.NdJ("change",function(s){return e.CHM(o),e.oxw().toggleAll(s)}),e._uU(1),e.ALo(2,"Translate"),e.qZA()}if(2&l){const o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.Texts.All))}}function D(l,r){if(1&l&&(e.TgZ(0,"button",44),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"clear"),e.qZA(),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,1,o.Texts.Cancel)," ")}}function E(l,r){if(1&l&&(e.TgZ(0,"button",45),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"save"),e.qZA(),e.qZA()),2&l){const o=e.oxw();e.Q6J("disabled",!o.roleForm.valid),e.xp6(1),e.hij("",e.lcZ(2,2,o.Texts.Save)," ")}}function P(l,r){if(1&l){const o=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){return e.CHM(o),e.oxw().submitEdit()}),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"save"),e.qZA(),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("disabled",!o.roleForm.valid),e.xp6(1),e.hij("",e.lcZ(2,2,o.Texts.Save)," ")}}function Y(l,r){1&l&&(e.TgZ(0,"mat-card-footer"),e._uU(1," main card footer\n"),e.qZA())}let _=(()=>{class l{constructor(o,t,s,n,c,p,g){this.formBuilder=o,this.repository=t,this.snackBar=s,this.data=n,this.matDialogRef=c,this.appText=p,this.progressBarService=g,this.Texts=this.appText.getAppTexts(),this.roleForm=this.formBuilder.group({rolename:["",i.kI.required],permissions:this.formBuilder.group({"00":[!1],"01":[!1],"02":[!1],"03":[!1],10:[!1],11:[!1],12:[!1],13:[!1],20:[!1],21:[!1],22:[!1],23:[!1],30:[!1],31:[!1],32:[!1],33:[!1],40:[!1],41:[!1],42:[!1],43:[!1],50:[!1],51:[!1],52:[!1],53:[!1],60:[!1],61:[!1],62:[!1],63:[!1],64:[!1],70:[!1]})}),this.submitEdit=()=>{this.progressBarService.showProgressbar(),this.repository.RoleRepository.editRole(this.roleForm.value,this.data.id).pipe((0,d.U)(ee=>{this.matDialogRef.close({event:"updated"})}),(0,Z.q)(1)).subscribe()},this.editing=n.role}ngOnInit(){var o;if(this.editing){for(let t=0;t<this.data.role.rolePermissions.length;t++)null===(o=this.roleForm.controls.permissions.get(this.data.role.rolePermissions[t].permission.code))||void 0===o||o.patchValue(!0);this.roleForm.controls.rolename.patchValue(this.data.role.roleName)}setTimeout(()=>this.progressBarService.hideProgressbar())}toggleAll(o){var t,s,n;console.log(o);for(let c=0;c<7;c++)for(let p=0;p<4;p++)null===(t=this.roleForm.controls.permissions.get(`${c}${p}`))||void 0===t||t.patchValue(o.checked);null===(s=this.roleForm.controls.permissions.get("64"))||void 0===s||s.patchValue(o.checked),null===(n=this.roleForm.controls.permissions.get("70"))||void 0===n||n.patchValue(o.checked)}submitForm(){this.progressBarService.showProgressbar(),this.repository.RoleRepository.addRole(this.roleForm.value).pipe((0,d.U)(o=>{201===o?(this.snackBar.open("Role added succefully","OK",{duration:3e3}),document.querySelector("#clearRoleForm").click()):409===o&&this.snackBar.open("Role already exists","OK",{duration:3e3}),this.progressBarService.hideProgressbar()}),(0,Z.q)(1)).subscribe()}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(i.qu),e.Y36(x.b),e.Y36(v.ux),e.Y36(m.WI),e.Y36(m.so),e.Y36(R.u),e.Y36(C.v))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-role-form"]],decls:149,vars:124,consts:[[4,"ngIf"],[1,"form-container"],[3,"formGroup","submit"],["appearance","outline",1,"rolename-container"],["matInput","","formControlName","rolename"],["color","warn",3,"change",4,"ngIf"],["formGroupName","permissions"],[1,"permissions-container"],[1,"permission-label"],["formControlName","00"],["formControlName","01","color","accent"],["formControlName","02","color","warn"],["formControlName","03","color","primary"],["inset",""],["formControlName","10"],["formControlName","11","color","accent"],["formControlName","12","color","warn"],["formControlName","13","color","primary"],["formControlName","20"],["formControlName","21","color","accent"],["formControlName","22","color","warn"],["formControlName","23","color","primary"],["formControlName","30"],["formControlName","31","color","accent"],["formControlName","32","color","warn"],["formControlName","33","color","primary"],["formControlName","40"],["formControlName","41","color","accent"],["formControlName","42","color","warn"],["formControlName","43","color","primary"],["formControlName","50"],["formControlName","51","color","accent"],["formControlName","52","color","warn"],["formControlName","53","color","primary"],["formControlName","60"],["formControlName","61","color","accent"],["formControlName","62","color","warn"],["formControlName","63","color","primary"],["formControlName","64","color","warn"],["formControlName","70"],["id","clearRoleForm","class","transitionButton","type","reset","mat-raised-button","","color","accent",4,"ngIf"],["type","submit","mat-raised-button","","class","submitButton transitionButton",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","class","submitButton transitionButton",3,"disabled","click",4,"ngIf"],["color","warn",3,"change"],["id","clearRoleForm","type","reset","mat-raised-button","","color","accent",1,"transitionButton"],["type","submit","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled"],["type","button","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled","click"]],template:function(o,t){1&o&&(e.YNc(0,F,3,3,"mat-card-title",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"form",2),e.NdJ("submit",function(){return t.submitForm()}),e.TgZ(4,"mat-card-content"),e.TgZ(5,"mat-form-field",3),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"Translate"),e.qZA(),e._UZ(9,"input",4),e.TgZ(10,"mat-error"),e._uU(11,"Role Name is required"),e.qZA(),e.qZA(),e.YNc(12,B,3,3,"mat-slide-toggle",5),e.TgZ(13,"div",6),e.TgZ(14,"div",7),e.TgZ(15,"h3",8),e._uU(16),e.ALo(17,"Translate"),e.qZA(),e.TgZ(18,"mat-slide-toggle",9),e._uU(19),e.ALo(20,"Translate"),e.qZA(),e.TgZ(21,"mat-slide-toggle",10),e._uU(22),e.ALo(23,"Translate"),e.qZA(),e.TgZ(24,"mat-slide-toggle",11),e._uU(25),e.ALo(26,"Translate"),e.qZA(),e.TgZ(27,"mat-slide-toggle",12),e._uU(28),e.ALo(29,"Translate"),e.qZA(),e.qZA(),e._UZ(30,"mat-divider",13),e.TgZ(31,"div",7),e.TgZ(32,"h3",8),e._uU(33),e.ALo(34,"Translate"),e.qZA(),e.TgZ(35,"mat-slide-toggle",14),e._uU(36),e.ALo(37,"Translate"),e.qZA(),e.TgZ(38,"mat-slide-toggle",15),e._uU(39),e.ALo(40,"Translate"),e.qZA(),e.TgZ(41,"mat-slide-toggle",16),e._uU(42),e.ALo(43,"Translate"),e.qZA(),e.TgZ(44,"mat-slide-toggle",17),e._uU(45),e.ALo(46,"Translate"),e.qZA(),e.qZA(),e._UZ(47,"mat-divider",13),e.TgZ(48,"div",7),e.TgZ(49,"h3",8),e._uU(50),e.ALo(51,"Translate"),e.qZA(),e.TgZ(52,"mat-slide-toggle",18),e._uU(53),e.ALo(54,"Translate"),e.qZA(),e.TgZ(55,"mat-slide-toggle",19),e._uU(56),e.ALo(57,"Translate"),e.qZA(),e.TgZ(58,"mat-slide-toggle",20),e._uU(59),e.ALo(60,"Translate"),e.qZA(),e.TgZ(61,"mat-slide-toggle",21),e._uU(62),e.ALo(63,"Translate"),e.qZA(),e.qZA(),e._UZ(64,"mat-divider",13),e.TgZ(65,"div",7),e.TgZ(66,"h3",8),e._uU(67),e.ALo(68,"Translate"),e.qZA(),e.TgZ(69,"mat-slide-toggle",22),e._uU(70),e.ALo(71,"Translate"),e.qZA(),e.TgZ(72,"mat-slide-toggle",23),e._uU(73),e.ALo(74,"Translate"),e.qZA(),e.TgZ(75,"mat-slide-toggle",24),e._uU(76),e.ALo(77,"Translate"),e.qZA(),e.TgZ(78,"mat-slide-toggle",25),e._uU(79),e.ALo(80,"Translate"),e.qZA(),e.qZA(),e._UZ(81,"mat-divider",13),e.TgZ(82,"div",7),e.TgZ(83,"h3",8),e._uU(84),e.ALo(85,"Translate"),e.qZA(),e.TgZ(86,"mat-slide-toggle",26),e._uU(87),e.ALo(88,"Translate"),e.qZA(),e.TgZ(89,"mat-slide-toggle",27),e._uU(90),e.ALo(91,"Translate"),e.qZA(),e.TgZ(92,"mat-slide-toggle",28),e._uU(93),e.ALo(94,"Translate"),e.qZA(),e.TgZ(95,"mat-slide-toggle",29),e._uU(96),e.ALo(97,"Translate"),e.qZA(),e.qZA(),e._UZ(98,"mat-divider",13),e.TgZ(99,"div",7),e.TgZ(100,"h3",8),e._uU(101),e.ALo(102,"Translate"),e.qZA(),e.TgZ(103,"mat-slide-toggle",30),e._uU(104),e.ALo(105,"Translate"),e.qZA(),e.TgZ(106,"mat-slide-toggle",31),e._uU(107),e.ALo(108,"Translate"),e.qZA(),e.TgZ(109,"mat-slide-toggle",32),e._uU(110),e.ALo(111,"Translate"),e.qZA(),e.TgZ(112,"mat-slide-toggle",33),e._uU(113),e.ALo(114,"Translate"),e.qZA(),e.qZA(),e._UZ(115,"mat-divider",13),e.TgZ(116,"div",7),e.TgZ(117,"h3",8),e._uU(118),e.ALo(119,"Translate"),e.qZA(),e.TgZ(120,"mat-slide-toggle",34),e._uU(121),e.ALo(122,"Translate"),e.qZA(),e.TgZ(123,"mat-slide-toggle",35),e._uU(124),e.ALo(125,"Translate"),e.qZA(),e.TgZ(126,"mat-slide-toggle",36),e._uU(127),e.ALo(128,"Translate"),e.qZA(),e.TgZ(129,"mat-slide-toggle",37),e._uU(130),e.ALo(131,"Translate"),e.qZA(),e.TgZ(132,"mat-slide-toggle",38),e._uU(133),e.ALo(134,"Translate"),e.qZA(),e.qZA(),e._UZ(135,"mat-divider",13),e.TgZ(136,"div",7),e.TgZ(137,"h3",8),e._uU(138),e.ALo(139,"Translate"),e.qZA(),e.TgZ(140,"mat-slide-toggle",39),e._uU(141),e.ALo(142,"Translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(143,"mat-divider",13),e.TgZ(144,"mat-card-actions"),e.YNc(145,D,5,3,"button",40),e.YNc(146,E,5,4,"button",41),e.YNc(147,P,5,4,"button",42),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(148,Y,2,0,"mat-card-footer",0)),2&o&&(e.Q6J("ngIf",!t.editing),e.xp6(3),e.Q6J("formGroup",t.roleForm),e.xp6(4),e.Oqu(e.lcZ(8,46,t.Texts.RoleName)),e.xp6(5),e.Q6J("ngIf",!t.editing),e.xp6(4),e.hij("",e.lcZ(17,48,t.Texts.Users),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(20,50,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(23,52,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(26,54,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(29,56,t.Texts.Delete)),e.xp6(5),e.hij("",e.lcZ(34,58,t.Texts.Doctors),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(37,60,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(40,62,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(43,64,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(46,66,t.Texts.Delete)),e.xp6(5),e.hij("",e.lcZ(51,68,t.Texts.Employees),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(54,70,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(57,72,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(60,74,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(63,76,t.Texts.Delete)),e.xp6(5),e.hij("",e.lcZ(68,78,t.Texts.Expenses),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(71,80,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(74,82,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(77,84,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(80,86,t.Texts.Delete)),e.xp6(5),e.hij("",e.lcZ(85,88,t.Texts.Patients),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(88,90,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(91,92,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(94,94,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(97,96,t.Texts.Delete)),e.xp6(5),e.hij("",e.lcZ(102,98,t.Texts.Roles),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(105,100,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(108,102,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(111,104,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(114,106,t.Texts.Delete)),e.xp6(5),e.hij("",e.lcZ(119,108,t.Texts.Visits),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(122,110,t.Texts.Get)),e.xp6(3),e.Oqu(e.lcZ(125,112,t.Texts.Add)),e.xp6(3),e.Oqu(e.lcZ(128,114,t.Texts.Edit)),e.xp6(3),e.Oqu(e.lcZ(131,116,t.Texts.Delete)),e.xp6(3),e.Oqu(e.lcZ(134,118,t.Texts.Live)),e.xp6(5),e.hij("",e.lcZ(139,120,t.Texts.Reports),"\xa0\xa0:\xa0\xa0"),e.xp6(3),e.Oqu(e.lcZ(142,122,t.Texts.Get)),e.xp6(4),e.Q6J("ngIf",!t.editing),e.xp6(1),e.Q6J("ngIf",!t.editing),e.xp6(1),e.Q6J("ngIf",t.editing),e.xp6(1),e.Q6J("ngIf",!t.editing))},directives:[f.O5,m.xY,i._Y,i.JL,i.sg,u.dn,T.KE,T.hX,q.Nt,i.Fj,i.JJ,i.u,T.TO,i.x0,U.Rr,b.d,u.hq,u.n5,y.lW,N.Hw,u.rt],pipes:[L.v],styles:[".rolename-container[_ngcontent-%COMP%]{width:98%;padding:5px 0 0}.permissions-container[_ngcontent-%COMP%]{padding:10px 0}.permission-label[_ngcontent-%COMP%]{display:inline}"]}),l})();var w=a(5077),I=a(9463),S=a(89),J=a(4408),M=a(166),j=a(4423);const Q=["rolename"];function G(l,r){if(1&l){const o=e.EpF();e.TgZ(0,"app-table",5),e.NdJ("editRow",function(s){return e.CHM(o),e.oxw().editRole(s)})("deleteRow",function(s){return e.CHM(o),e.oxw().deleteRole(s)})("tablePaging",function(s){return e.CHM(o),e.oxw().handlePaging(s)})("rowDetails",function(s){return e.CHM(o),e.oxw().showDetails(s)}),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("table",o.table)("excludedColumns",o.excludedColumns)("canEdit",o.canEdit)("canDelete",o.canDelete)}}const H=[{path:"",component:(()=>{class l{constructor(o,t,s,n,c,p){this.repository=o,this.dilaog=t,this.snackBar=s,this.appText=n,this.authenticationService=c,this.porgressBarService=p,this.dataLoaded=!1,this.excludedColumns=["id","appUserRoles","rolePermissions"],this.Texts=this.appText.getAppTexts(),this.fetchData=()=>this.repository.RoleRepository.getRoles(this.roleNameSearchKey,this.pagingFilter).pipe((0,d.U)(g=>{this.table=g,this.dataLoaded=!0,this.porgressBarService.hideProgressbar()}),(0,Z.q)(1)).subscribe(),this.editRole=g=>{"System Developer"==g.roleName?this.snackBar.open("You cannot edit system developer's role!","Close",{duration:6e3}):this.dilaog.open(_,{width:"500px",data:{role:g,id:g.id}}).afterClosed().pipe((0,d.U)(O=>{O&&"updated"==O.event&&(this.snackBar.open("Role updated successfully","Close",{duration:6e3}),this.fetchData())}),(0,Z.q)(1)).subscribe()},this.ngOnDestroy=()=>this.roleChangeEvent.unsubscribe(),this.canEdit=this.authenticationService.checkPermission("/EditRole"),this.canDelete=this.authenticationService.checkPermission("/DeleteRole")}ngOnInit(){this.porgressBarService.showProgressbar(),this.roleChangeEvent=(0,w.R)(this.rolename.nativeElement,"keyup").pipe((0,I.b)(1e3),(0,d.U)(o=>{this.roleNameSearchKey=o.target.value.trim(),this.fetchData()})).subscribe(),this.fetchData()}deleteRole(o){"System Developer"===o.roleName?this.snackBar.open("You cannot delete system developer's role!","Close",{duration:6e3}):this.dilaog.open(S.F,{width:"300px",height:"150px",data:{message:"Are you sure you want to delete this role?"}}).afterClosed().pipe((0,d.U)(s=>{"delete"===s.event&&(this.porgressBarService.showProgressbar(),this.repository.RoleRepository.deleteRole(o.id).pipe((0,d.U)(n=>{this.fetchData(),this.snackBar.open("Role deleted succefully","OK",{duration:3e3})}),(0,Z.q)(1)).subscribe())}),(0,Z.q)(1)).subscribe()}showDetails(o){this.dilaog.open(J.d,{width:"500px",height:"600px",data:{model:o}})}handlePaging(o){this.pagingFilter=o,this.fetchData()}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(x.b),e.Y36(m.uw),e.Y36(v.ux),e.Y36(R.u),e.Y36(M.$),e.Y36(C.v))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-role"]],viewQuery:function(o,t){if(1&o&&e.Gf(Q,7),2&o){let s;e.iGM(s=e.CRH())&&(t.rolename=s.first)}},decls:12,vars:7,consts:[[1,"searchBar"],["for","rolename"],["type","text",1,"searchBarInput"],["rolename",""],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails",4,"ngIf"],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"Translate"),e.qZA(),e.TgZ(3,"div",0),e.TgZ(4,"label",1),e._uU(5),e.ALo(6,"Translate"),e._UZ(7,"input",2,3),e.qZA(),e.qZA(),e.YNc(9,G,1,4,"app-table",4),e.TgZ(10,"mat-card-footer"),e._uU(11," main card footer\n"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,3,t.Texts.RoleManagement)),e.xp6(4),e.hij(" ",e.lcZ(6,5,t.Texts.RoleName)," : "),e.xp6(4),e.Q6J("ngIf",t.dataLoaded))},directives:[u.n5,f.O5,u.rt,j.a],pipes:[L.v],styles:[""]}),l})()},{path:"AddRole",component:_}];let V=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[h.Bz.forChild(H)],h.Bz]}),l})();var K=a(1548),W=a(9009),X=a(7735),z=a(6400),$=a(8191);let k=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({providers:[{provide:m.so,useValue:{}},{provide:m.WI,useValue:{}}],imports:[[f.ez,V,K.N6,u.QW,W.Cv,X.m,T.lN,N.Ps,b.t,q.c,y.ot,U.rP,z.LD,i.UX,m.Is,$.I]]}),l})()}}]);