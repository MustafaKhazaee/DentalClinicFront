"use strict";(self.webpackChunkDentalClinic=self.webpackChunkDentalClinic||[]).push([[46],{3046:(ne,b,a)=>{a.r(b),a.d(b,{ExpenseModule:()=>se});var x=a(6019),E=a(3886),i=a(9133),c=a(5304),l=a(4753),h=a(9468),e=a(3668),A=a(4300),C=a(9966),D=a(2782),y=a(2215),d=a(888),m=a(8167),g=a(138),u=a(8727),F=a(5694),U=a(86),I=a(9112),B=a(4751);function J(s,r){if(1&s&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"Translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.Texts.ExpenseManagement))}}function S(s,r){1&s&&e._UZ(0,"mat-divider",16)}function P(s,r){if(1&s&&(e.TgZ(0,"button",17),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"clear"),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,1,t.Texts.Cancel)," ")}}function Y(s,r){if(1&s&&(e.TgZ(0,"button",18),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"save"),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.Q6J("disabled",!t.expenseForm.valid),e.xp6(1),e.hij("",e.lcZ(2,2,t.Texts.Save)," ")}}function R(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitEdit()}),e._uU(1),e.ALo(2,"Translate"),e.TgZ(3,"mat-icon"),e._uU(4,"save"),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("disabled",!t.expenseForm.valid),e.xp6(1),e.hij("",e.lcZ(2,2,t.Texts.Save)," ")}}function M(s,r){1&s&&(e.TgZ(0,"mat-card-footer"),e._uU(1," main card footer\n"),e.qZA())}let q=(()=>{class s{constructor(t,n,o,p,Z,v,T){this.formBuilder=t,this.repository=n,this.snackBar=o,this.data=p,this.matDialogRef=Z,this.appText=v,this.progressBarService=T,this.Texts=this.appText.getAppTexts(),this.expenseForm=this.formBuilder.group({itemName:["",i.kI.required],pricePerItem:["",i.kI.required],count:["0",i.kI.required],date:[],description:[]}),this.submitEdit=()=>{this.progressBarService.showProgressbar(),this.repository.ExpenseRepository.editExpense(this.expenseForm.value,this.data.id).pipe((0,l.U)(N=>{this.matDialogRef.close({event:"updated"})}),(0,h.q)(1)).subscribe()},this.editing=p.expense}ngOnInit(){this.editing&&(this.expenseForm.controls.itemName.setValue(this.data.expense.itemName),this.expenseForm.controls.pricePerItem.setValue(this.data.expense.pricePerItem),this.expenseForm.controls.count.setValue(this.data.expense.count),this.expenseForm.controls.date.setValue(this.data.expense.date),this.expenseForm.controls.description.setValue(this.data.expense.description)),setTimeout(()=>this.progressBarService.hideProgressbar())}submitForm(){this.progressBarService.showProgressbar(),this.repository.ExpenseRepository.addExpense(this.expenseForm.value).pipe((0,l.U)(t=>{201===t?(this.snackBar.open("Expense added succefully","OK",{duration:3e3}),document.querySelector("#clearExpenseForm").click()):this.snackBar.open(409===t?"Expense already exists":"Error occured while adding the expense!","OK",{duration:3e3}),this.progressBarService.hideProgressbar()}),(0,h.q)(1)).subscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(i.qu),e.Y36(A.b),e.Y36(C.ux),e.Y36(c.WI),e.Y36(c.so),e.Y36(D.u),e.Y36(y.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-expense-form"]],decls:47,vars:24,consts:[[4,"ngIf"],[1,"form-container"],[3,"formGroup","submit"],[1,"flex-box-show"],["appearance","outline"],["matInput","","formControlName","itemName"],["type","number","matInput","","formControlName","pricePerItem"],["type","number","matInput","","formControlName","count"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["myDatePicker",""],["matInput","","formControlName","description"],["inset","",4,"ngIf"],["id","clearExpenseForm","class","transitionButton","type","reset","mat-raised-button","","color","accent",4,"ngIf"],["type","submit","mat-raised-button","","class","submitButton transitionButton",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","class","submitButton transitionButton",3,"disabled","click",4,"ngIf"],["inset",""],["id","clearExpenseForm","type","reset","mat-raised-button","","color","accent",1,"transitionButton"],["type","submit","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled"],["type","button","mat-raised-button","",1,"submitButton","transitionButton",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.YNc(0,J,3,3,"mat-card-title",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"form",2),e.NdJ("submit",function(){return n.submitForm()}),e.TgZ(4,"mat-card-content",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"Translate"),e.qZA(),e._UZ(9,"input",5),e.TgZ(10,"mat-error"),e._uU(11,"Item Name is required"),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",4),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"Translate"),e.qZA(),e._UZ(16,"input",6),e.TgZ(17,"mat-error"),e._uU(18,"Price Per Item is required"),e.qZA(),e.qZA(),e.TgZ(19,"mat-form-field",4),e.TgZ(20,"mat-label"),e._uU(21),e.ALo(22,"Translate"),e.qZA(),e._UZ(23,"input",7),e.TgZ(24,"mat-error"),e._uU(25,"Count is required"),e.qZA(),e.qZA(),e.TgZ(26,"mat-form-field",4),e.TgZ(27,"mat-label"),e._uU(28),e.ALo(29,"Translate"),e.qZA(),e._UZ(30,"input",8),e._UZ(31,"mat-datepicker-toggle",9),e._UZ(32,"mat-datepicker",null,10),e.TgZ(34,"mat-error"),e._uU(35,"Date is required"),e.qZA(),e.qZA(),e.TgZ(36,"mat-form-field",4),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"Translate"),e.qZA(),e._UZ(40,"input",11),e.qZA(),e.qZA(),e.YNc(41,S,1,0,"mat-divider",12),e.TgZ(42,"mat-card-actions"),e.YNc(43,P,5,3,"button",13),e.YNc(44,Y,5,4,"button",14),e.YNc(45,R,5,4,"button",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(46,M,2,0,"mat-card-footer",0)),2&t){const o=e.MAs(33);e.Q6J("ngIf",!n.editing),e.xp6(3),e.Q6J("formGroup",n.expenseForm),e.xp6(4),e.Oqu(e.lcZ(8,14,n.Texts.ItemName)),e.xp6(7),e.Oqu(e.lcZ(15,16,n.Texts.PricePerItem)),e.xp6(7),e.Oqu(e.lcZ(22,18,n.Texts.Count)),e.xp6(7),e.Oqu(e.lcZ(29,20,n.Texts.Date)),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.Oqu(e.lcZ(39,22,n.Texts.Description)),e.xp6(3),e.Q6J("ngIf",!n.editing),e.xp6(2),e.Q6J("ngIf",!n.editing),e.xp6(1),e.Q6J("ngIf",!n.editing),e.xp6(1),e.Q6J("ngIf",n.editing),e.xp6(1),e.Q6J("ngIf",!n.editing)}},directives:[x.O5,c.xY,i._Y,i.JL,i.sg,d.dn,m.KE,m.hX,g.Nt,i.Fj,i.JJ,i.u,m.TO,i.wV,u.hl,u.nW,m.R9,u.Mq,d.hq,d.n5,F.d,U.lW,I.Hw,d.rt],pipes:[B.v],styles:[""]}),s})();var f=a(9463),L=a(5077),Q=a(89),O=a(4408),K=a(5479),w=a(166),V=a(4423);const j=["itemname"];function k(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"app-table",12),e.NdJ("editRow",function(o){return e.CHM(t),e.oxw().editExpense(o)})("deleteRow",function(o){return e.CHM(t),e.oxw().deleteExpense(o)})("tablePaging",function(o){return e.CHM(t),e.oxw().handlePaging(o)})("rowDetails",function(o){return e.CHM(t),e.oxw().showDetails(o)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("table",t.table)("excludedColumns",t.excludedColumns)("canEdit",t.canEdit)("canDelete",t.canDelete)}}const H=[{path:"",component:(()=>{class s{constructor(t,n,o,p,Z,v,T,N){this.formBuilder=t,this.overlay=n,this.repository=o,this.dilaog=p,this.snackBar=Z,this.appText=v,this.authenticationService=T,this.progressBarService=N,this.Texts=this.appText.getAppTexts(),this.dataLoaded=!1,this.excludedColumns=["id","createdBy","createdDate","lastModifiedBy","lastModifiedDate","isDeleted"],this.expenseForm=this.formBuilder.group({startDate:[""],endDate:[""]}),this.startDate=this.expenseForm.controls.startDate,this.endDate=this.expenseForm.controls.endDate,this.fetchData=()=>this.repository.ExpenseRepository.getExpenses(this.itemnameSearchKey,this.startdateSearchKey,this.enddateSearchKey,this.pagingFilter).pipe((0,l.U)(ae=>{this.table=ae,this.dataLoaded=!0,this.progressBarService.hideProgressbar()}),(0,h.q)(1)).subscribe(),this.canEdit=this.authenticationService.checkPermission("/EditExpense"),this.canDelete=this.authenticationService.checkPermission("/DeleteExpense")}ngOnInit(){this.progressBarService.showProgressbar(),this.registerListeners(),this.fetchData()}registerListeners(){this.startDateChangeEvent=this.startDate.valueChanges.pipe((0,f.b)(1e3),(0,l.U)(t=>{this.startdateSearchKey=`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`,this.fetchData()})).subscribe(),this.endDateChangeEvent=this.endDate.valueChanges.pipe((0,f.b)(1e3),(0,l.U)(t=>{this.enddateSearchKey=`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`,this.fetchData()})).subscribe(),this.itemNameChangeEvent=(0,L.R)(this.itemname.nativeElement,"keyup").pipe((0,f.b)(1e3),(0,l.U)(t=>{this.itemnameSearchKey=t.target.value.trim(),this.fetchData()})).subscribe()}editExpense(t){this.dilaog.open(q,{width:"320px",data:{expense:t,id:t.id,scrollStrategy:this.overlay.scrollStrategies.reposition}}).afterClosed().pipe((0,l.U)(p=>{p&&"updated"==p.event&&(this.fetchData(),this.snackBar.open("Expense updated succefully","OK",{duration:3e3}))}),(0,h.q)(1)).subscribe()}deleteExpense(t){this.dilaog.open(Q.F,{width:"300px",height:"150px",data:{message:"Are you sure you want to delete this expense?"}}).afterClosed().pipe((0,l.U)(o=>{o&&"delete"===o.event&&(this.progressBarService.showProgressbar(),this.repository.ExpenseRepository.deleteExpense(t.id).pipe((0,l.U)(p=>{this.fetchData(),this.snackBar.open("Expense deleted succefully","OK",{duration:3e3})}),(0,h.q)(1)).subscribe())}),(0,h.q)(1)).subscribe()}showDetails(t){this.dilaog.open(O.d,{width:"500px",height:"600px",data:{model:t}})}handlePaging(t){this.pagingFilter=t,this.fetchData()}ngOnDestroy(){this.itemNameChangeEvent.unsubscribe(),this.startDateChangeEvent.unsubscribe(),this.endDateChangeEvent.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(i.qu),e.Y36(K.aV),e.Y36(A.b),e.Y36(c.uw),e.Y36(C.ux),e.Y36(D.u),e.Y36(w.$),e.Y36(y.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-expense"]],viewQuery:function(t,n){if(1&t&&e.Gf(j,7),2&t){let o;e.iGM(o=e.CRH())&&(n.itemname=o.first)}},decls:29,vars:18,consts:[[1,"searchBar"],[3,"formGroup"],["for","itemname"],["type","text",1,"searchBarInput"],["itemname",""],["appearance","outline"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["myDatePicker1",""],["matInput","","formControlName","endDate",3,"matDatepicker"],["myDatePicker",""],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails",4,"ngIf"],[3,"table","excludedColumns","canEdit","canDelete","editRow","deleteRow","tablePaging","rowDetails"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"Translate"),e.qZA(),e.TgZ(3,"div",0),e.TgZ(4,"form",1),e.TgZ(5,"label",2),e._uU(6),e.ALo(7,"Translate"),e._UZ(8,"input",3,4),e.qZA(),e.TgZ(10,"mat-form-field",5),e.TgZ(11,"mat-label"),e._uU(12),e.ALo(13,"Translate"),e.qZA(),e._UZ(14,"input",6),e._UZ(15,"mat-datepicker-toggle",7),e._UZ(16,"mat-datepicker",null,8),e.qZA(),e.TgZ(18,"mat-form-field",5),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"Translate"),e.qZA(),e._UZ(22,"input",9),e._UZ(23,"mat-datepicker-toggle",7),e._UZ(24,"mat-datepicker",null,10),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,k,1,4,"app-table",11),e.TgZ(27,"mat-card-footer"),e._uU(28," main card footer\n"),e.qZA()),2&t){const o=e.MAs(17),p=e.MAs(25);e.xp6(1),e.Oqu(e.lcZ(2,10,n.Texts.ExpenseManagement)),e.xp6(3),e.Q6J("formGroup",n.expenseForm),e.xp6(2),e.hij(" ",e.lcZ(7,12,n.Texts.ItemName)," : "),e.xp6(6),e.Oqu(e.lcZ(13,14,n.Texts.StartDate)),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(5),e.Oqu(e.lcZ(21,16,n.Texts.EndDate)),e.xp6(2),e.Q6J("matDatepicker",p),e.xp6(1),e.Q6J("for",p),e.xp6(3),e.Q6J("ngIf",n.dataLoaded)}},directives:[d.n5,i._Y,i.JL,i.sg,m.KE,m.hX,g.Nt,i.Fj,u.hl,i.JJ,i.u,u.nW,m.R9,u.Mq,x.O5,d.rt,V.a],pipes:[B.v],styles:[""]}),s})()},{path:"AddExpense",component:q}];let $=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[E.Bz.forChild(H)],E.Bz]}),s})();var G=a(1548),W=a(9009),X=a(9859),z=a(6400),_=a(514),ee=a(7735),te=a(8191);let se=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[{provide:c.so,useValue:{}},{provide:c.WI,useValue:{}}],imports:[[x.ez,$,G.N6,d.QW,W.Cv,ee.m,m.lN,I.Ps,F.t,g.c,U.ot,_.rP,z.LD,i.UX,c.Is,X.Fk,u.FA,te.I]]}),s})()}}]);